<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="fontawesome-free-5.15.3-web/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <title>Login - Hypertension Medical Record</title>
</head>
<body>
    
    <header class="header">
        <img src="images/navrem.png" id="logo" alt="">

        <nav class="navbar">
            <a href="home">Home</a>
            <a href="hmr">Hypertension Medical Record</a>
            <a href="info">Informasi Hipertensi</a>
            <a href="contact">Contact</a>
        </nav>

        <div class="icons">
            <div id="menubar" class="fas fa-bars"></div>
            <a href="#">Login</a>
        </div>
    </header>

    <section class="login">
        <div class="login-content">
            <h2>Login</h2>
            <form id="login-form">
                <input type="text" placeholder="Username">
                <input type="password" placeholder="Password">
                <button type="submit">Login</button>
            </form>
        </div>
    </section>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script>
  // Inisialisasi Firebase
  const firebaseConfig = {
  apiKey: "AIzaSyBfwJoBt2kT0iOMjlDBw_heFaqjwjlp5ZU",
  authDomain: "medical-record-7557a.firebaseapp.com",
  databaseURL: "https://medical-record-7557a-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "medical-record-7557a",
  storageBucket: "medical-record-7557a.appspot.com",
  messagingSenderId: "973084416066",
  appId: "1:973084416066:web:50c8c2831db284a7e835db",
  measurementId: "G-MZ9NN8VEQZ"
  };
  firebase.initializeApp(firebaseConfig);

  firebase.initializeApp(firebaseConfig);

      // Initialize Firestore
      const firestore = firebase.firestore();

      // Menangani form login
      const loginForm = document.getElementById("login-form");
      loginForm.addEventListener("submit", function (event) {
        event.preventDefault();

        const nip = document.querySelector("input[type='text']").value;
        const password = document.querySelector("input[type='password']").value;

        // Mengecek data login pada Firestore
        firestore.collection("login").where("nip", "==", nip).where("password", "==", password)
          .get()
          .then((querySnapshot) => {
            if (!querySnapshot.empty) {
              // Redirect ke halaman cekriwayat.html
              window.location.href = "cekriwayat/index.html";
            } else {
              // Tampilkan pesan login gagal
              alert("Login gagal. NIP atau password salah.");
            }
          })
          .catch((error) => {
            console.error("Error fetching login data: ", error);
          });
      });
    </script>
    <script src="script.js"></script>
</body>
</html>
